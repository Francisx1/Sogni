<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport// ÊòæÁ§∫Build Character SheetÊåâÈíÆÂπ∂ÁªëÂÆöÈÄªËæë
function showBuildCharacterSheetButton() {
  const btn = document.getElementById('build-character-sheet');
  btn.style.display = 'inline-block';
  btn.onclick = function() {
    const imgSrc = document.getElementById('character-image').src;
    if (imgSrc) {
      // ‰øùÂ≠òËßíËâ≤ÂõæÁâá
      localStorage.setItem('generatedCharacterImage', imgSrc);
      
      // ‰øùÂ≠òË°®ÂçïÊï∞ÊçÆ
      const form = document.getElementById('character-form');
      const formData = new FormData(form);
      const characterData = {
        age: formData.get('age'),
        gender: formData.get('gender'),
        species: formData.get('species'),
        class: formData.get('class'),
        location: formData.get('location'),
        color: formData.get('color')
      };
      localStorage.setItem('characterFormData', JSON.stringify(characterData));
      
      window.location.href = '../Character_Sheet-2020.04.06/Character_Sheet/Web_UI/index.html';="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>DND Character Generator</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>DND Character Generator</h1>
  <div class="card-container">
    <div class="card">
      <div class="card-front">
        <form id="character-form">
          <label>Age: <input type="number" name="age" min="1" max="120" value="60" required></label><br>
          <label>Gender:
            <select name="gender">
              <option value="male">Male</option>
              <option value="female">Female</option>
            </select>
          </label><br>
          <label>Species:
            <select name="species">
              <option>Dragonborn</option>
              <option>Dwarf</option>
              <option>Elf</option>
              <option>Halfling</option>
              <option>Human</option>
              <option>Orc</option>
              <option>Tiefling</option>
            </select>
          </label><br>
          <label>Class:
            <select name="class">
              <option>Barbarian</option>
              <option>Bard</option>
              <option>Cleric</option>
              <option>Druid</option>
              <option>Fighter</option>
              <option>Monk</option>
              <option>Paladin</option>
              <option>Ranger</option>
              <option>Rogue</option>
              <option>Sorcerer</option>
              <option>Warlock</option>
              <option>Wizard</option>
            </select>
          </label><br>
          <label>Location:
            <select name="location">
              <option>Forest</option>
              <option>Castle</option>
              <option>Cave</option>
              <option>Temple</option>
              <option>Village</option>
              <option>Mountain</option>
              <option>Graveyard</option>
              <option>Dungeon</option>
            </select>
          </label><br>
          <label>Favorite Color:
            <select name="color">
              <option>Red</option>
              <option>Yellow</option>
              <option>Blue</option>
              <option>Green</option>
              <option>Orange</option>
              <option>Purple</option>
              <option>Pink</option>
              <option>Black</option>
              <option>White</option>
              <option>Gray</option>
              <option>Brown</option>
            </select>
          </label><br>
          <button type="submit">Generate Character</button>
        </form>
      </div>
      <div class="card-back">
        <div class="loading-container">
          <div class="loading-spinner"></div>
          <p id="fun-fact" class="fun-fact">üßô Loading your magical character...</p>
        </div>
        <img id="character-image" src="" alt="Character Card">
        <button id="save-image" style="display:none;">Save Image</button>
        <button id="generate-another" class="generate-another-btn">Generate Another One</button>
        <button id="build-character-sheet" style="display:none;">Build Character Sheet</button>
      </div>
    </div>
  </div>
  <script src="app.js"></script>
  <script>
  // ÊòæÁ§∫Build Character SheetÊåâÈíÆÂπ∂ÁªëÂÆöÈÄªËæë
  function showBuildCharacterSheetButton() {
    const buildBtn = document.getElementById('build-character-sheet');
    const saveBtn = document.getElementById('save-image');
    
    buildBtn.style.display = 'inline-block';
    saveBtn.style.display = 'inline-block';
    
    buildBtn.onclick = function() {
      const imgSrc = document.getElementById('character-image').src;
      
      if (imgSrc) {
        // ‰øùÂ≠òËßíËâ≤ÂõæÁâá
        localStorage.setItem('generatedCharacterImage', imgSrc);
        
        // ‰øùÂ≠òË°®ÂçïÊï∞ÊçÆ
        const form = document.getElementById('character-form');
        const formData = new FormData(form);
        const characterData = {
          age: formData.get('age'),
          gender: formData.get('gender'),
          species: formData.get('species'),
          class: formData.get('class'),
          location: formData.get('location'),
          color: formData.get('color')
        };
        localStorage.setItem('characterFormData', JSON.stringify(characterData));
        
        window.location.href = '/character-sheet.html';
      }
    };
    
    saveBtn.onclick = function() {
      const imgSrc = document.getElementById('character-image').src;
      if (imgSrc) {
        fetch(imgSrc)
          .then(response => response.blob())
          .then(blob => {
            const url = window.URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'dnd-character.png';
            link.style.display = 'none';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            window.URL.revokeObjectURL(url);
          })
          .catch(error => {
            console.log('Download failed, trying alternative method...');
            // Â¶ÇÊûúfetchÂ§±Ë¥•ÔºåÂ∞ùËØïÁõ¥Êé•‰∏ãËΩΩ
            const link = document.createElement('a');
            link.href = imgSrc;
            link.download = 'dnd-character.png';
            link.target = '_blank';
            link.style.display = 'none';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
          });
      }
    };
  }
  </script>
</body>
</html>
